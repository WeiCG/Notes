# 信息收集

> 2021-04-24 奔跑的咸鱼

**渗透测试的思路就是从信息收集开始的，掌握信息的多少将决定发现漏洞机会的大小**

## CND绕过

### 如何判断目标存在CDN服务

- 利用多节点技术进行请求返回判断

### 常见的CDN绕过技术

- 子域名查询
  - CND价格不便宜，通常只会为主站或主要的子站点配置CDN
  - 要求主域名和子域名在同一个服务器上
- 通过内部邮件服务查询
  - 通过目标网站的注册或订阅邮件等功能让目标给自己发邮件
  - 通过查看邮件的各种信息，可能能获取到真实IP地址
- 国外地址请求
- 扫描全网 - 通过工具在全球不同的地方访问目标网络
  - CDN不可能会部署到全球
  - 目标网络的真实IP地址一定会出现在返回的IP列表中
- DNS历史记录
  - 对于域名使用较长的网站，可能在目标网站刚使用时没有使用CDN服务
  - DNS服务器的历史解析记录中就可能存在目标网站服务器未使用CDN时的真实IP地址
- 利用黑暗引擎搜索 - 类似于全网扫描，但可以搜索定制的内容

### 查到之后

修改本地的host文件，将目标域名映射到主IP处

### 危害

暴露真实IP后，可以实行DDoS攻击，而且，攻击者可以直接入侵真实服务器而不是CDN服务器

## 相关信息

### 是否Web

- CDN问题
- 程序源码 - 开源程序、开源CMS、未知
- 平台 - 操作系统、服务器、数据库
- 站点搭建 - 目标站点、端口、域名
  - 旁路站点 - 同一服务器中存在不同站点
  - C段 - 同一网段不同服务器中存在的不同站点
  - 搭建网站类软件 - PHPStudy、宝塔等，通过HTTP头上的server可以看出，如果server特别详细，可能就是使用了搭建类软件
- 防护WAF - 安全狗、宝塔、云盾(阿里云自带)等

### 有无APP

- 涉及Web协议 - 同Web相同
- 非Web协议 - 尝试手动提取Web、反编译逆向

### 其他

- 资产信息 - 各种平台信息、Whois信息、备案信息、github等
- 第三方应用 - 数据库、网站管理平台、服务器上的软件等
- 各种服务接口 - 存储服务、支付服务等
- 微信公众号
- 公司的内部讨论组或QQ群