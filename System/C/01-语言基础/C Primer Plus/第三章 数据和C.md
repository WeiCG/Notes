

# 第三章 数据和C

> 本笔记写于2020年2月16日，参考书籍为《C Primer Plus》(第六版)，
>
> 以下示例均运行于macOS Catalina 10.15.3上，编译器为clang 11.0.0
>
> PS：如果笔记中有任何的错误，请在下方评论中留言，我会及时回复并修改，谢谢

## 概述

程序的根本就是处理数据。而处理数据的首先就是要存储数据，如果存储不了数据，何谈处理。而数据类型就是要存储数据的类型，比如：数字7表示整型；数字3.14表示浮点型等。本章的内容就是介绍C语言为我们提供的那些**基本数据类型**。

有基本数据类型就有高级数据类型，高级数据类型我们会在接下来的笔记中一一详解。

## 数字类型

C语言中数字类型主要分为两类，这主要因为不同的数字类型在计算机中的存储方式不同。

1. 整数，指没有小数部分的数字
2. 浮点数，指包含小数部分的数字

这是我们平时使用最多的两种数字类型。C语言提供了众多的数字类型，但多就带来了另一个坏处——乱。很多版本的C语言书籍和博客都是从整型和浮点型的区别来介绍的数字类型，但我在这里另辟蹊径，从另一个角度来解析C语言提供的数字类型。

### 基本数字类型

C语言中其实是存在基本数字类型这一概念的，但其实这个概念很少有人去提，它是和附属类型来对应的，这个我们下面在介绍，先看基本数字类型。

| 基本数字类型 | 说明                                       |
| :----------: | ------------------------------------------ |
|     int      | 整数，没有小数部分的数字                   |
|    float     | 浮点数，有小数部分的数字，6位有效数字      |
|    double    | 浮点数，有小数部分的数字，至少10位有效数字 |
|   _Complex   | C99新增。复数                              |

> 在C99中还新增了一个关于虚数的关键字_Imaginary，但虚数类型一般属于可选类型。目前这个类型在我的电脑上clang和gcc都不支持。我查看了电脑里的标准库文件<complex.h>，也没有关于imaginary类型的宏定义。因此接下来的内容中我就没有写修饰虚数类型的情况，如果以后有用到的话我会进行补充。

有没有发现，C语言提供的基本数字类型其实就是我们学过的整数、实数和复数。这几种是C语言中最基本的数字类型，也是我们在以后的开发过程中最常用到的几种数据类型。不论其他的数据类型如何去改变，实质上都逃不过这几种基本数字类型。

### 附属类型

C语言中为附属类型提供了4个关键字。但附属类型的种类其实是很多的，大致上可以分为三组

| 附属类型  | 说明                      |
| :-------: | ------------------------- |
|   short   | 表示短的，修饰int         |
|   long    | 表示长的，修饰int、double |
| long long | 表示长长的，修饰int       |

| 附属类型 | 说明                                        |
| :------: | ------------------------------------------- |
| unsigned | 表示无符号的，即零和正整数，修饰int         |
|  signed  | 表示有符号的，即负整数、零和正整数，修饰int |

| 附属类型  | 说明                      |
| :-------: | ------------------------- |
|   float   | 表示单精度，修饰_Complex  |
|  double   | 表示双精度，修饰_Complex  |

注意，**上面每组类型在修饰时最多同时存在一个**，比如用`short`修饰`int`后，就不能再用`long`修饰了；用`double`修饰`_Complex`后，就不能用`float`修饰了。

同时附属类型组之间可以同时存在，但必须符合修饰的原则。可以看下面的这三个示例：

- `long`可以修饰`double`，`double`可以修饰`_Complex`，就存在`long double _Complex`类型
- `short`可以修饰`int`，`unsigned`也可以修饰`int`，就存在`unsigned short int`类型
- `short`不能修饰`double`，所以不存在`short double _Complex`类型

> 这里有个特殊的附属类型signed，所有的整数类型默认已经为有符号类型，所以一般我们不会显式指定该附属类型

## 字符类型

上面我们介绍了数字，但在平时的生活中，除了数字外，各种字符也是我们最常用的，比如字母、算术符号、空格等。因此，C语言同样提供了表示字符的数据类型——`char`类型。`char`类型中可以存储各种字符，在C语言中字符以单引号`''`括住，要注意的是：**单引号里有且只能有一个字符**。一个字符类型的示例：`char ch = 'A';`

讨论字符类型就不能不说ASCII码。字符在计算机中是无法直接存储的，比如一个字符`A`，计算机没有办法直接存储一个A，计算机的底层只能存储二进制数字

> 有很多课本上都将字符类型归入了整型中去介绍，我认为这个非常不正确的。虽然在计算机底层中，字符是以二进制的形式来存储的，但在我看来，数字就是数字，字母就是字母，绝对不要用定义数字的方法去定义字母。

## 布尔类型

这是C语言提供的最后一种数据类型，表示逻辑真与假的类型。C99标准中提供了其关键字为`_Bool`。布尔类型只有两个取值，即逻辑真`true`和逻辑假`false`。

## 可移植类型

C语言中虽然提供了各种整数类型，但实际上C语言并没有直接规定类型所占的位数。如：标准`int`类型所占位数要大于等于短整型`short int`类型，至于到底是大于还是等于就要看各自机器了，这为C语言的移植带来了问题。因此C语言在C99版本中新增了两个头文件——`stdint.h`和`inttypes.h`，以确保C语言类型在各系统中的功能相同。

这两个头文件为现有类型创建了更多的类型名以便于C语言的移植。典型的如：`int32_t`类型表示32位有符号整数类型，这个类型在不同的机器上有着不同的实现。如果底层实现中`int`类型对应32位，那么`int32_t`就是普通的`int`，如果底层实现中`int`类型对应着16位，那么`int32_t`就是`long`类型。

对于上面两个头文件的更多信息如果有机会以后我会在C标准库中详细叙述。

## 字面值

字面值是一个很有趣的概念，实际上就是在程序中出现的数字和字母。比如介绍赋值时的`num = 1`中的`1`和上面的`char ch = 'A';`中的`'A'`都是字面值。

字面值分为两类：

1. 数字：整数默认为`int`类型，浮点数默认为`double`类型
2. 字符：C语言的字符非常奇怪

## 使用数据类型
