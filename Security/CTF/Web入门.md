# Web入门

对于CTF线上比赛，Web类题目是主要的题型之一

- 相比于二进制、逆向等，Web类不需要掌握系统底层知识
- 相比于密码学、杂项，Web类不需要特别强的编程能力

Web类题目常见的漏洞有：

- 注入
- XSS
- 文件包含
- 代码执行
- 上传
- CSRF
- ...

## 信息收集

信息收集是安全攻防前期的必备工作，而在CTF比赛中，信息收集涵盖的面非常的广泛，杂乱而无章，大部分都涉及到工具的使用

### 敏感目录

敏感目录的泄漏，攻击者往往可以获取到网站的源代码和敏感的URL地址，如网站的后台地址等。但在实际比赛过程中，直接访问敏感的如.git或.svn文件夹会直接报错，此时可以试着访问一下下面的文件，如.git/config或.svn/entries和wc.db等，如果有内容返回，通常都是有泄漏的。

#### Git泄漏

Git是目前最常用的分布式版本控制系统，开发人员在开发过程中可能会遗忘.git文件夹，导致攻击者可以通过.git文件夹中的信息获取开发人员提交过的所有源代码

- 常规git泄漏
  - 无需任何其他操作只需要通过工具即可获得网站源码或flag
  - 工具 - https://github.com/denny0223/scrabble
- git回滚
  - git会记录每次提交的修改，所以当题目存在git泄漏时，flag或敏感文件可能在修改中被删除或覆盖了，需要从过去的版本中恢复
  - 方法1 - 先利用类型1中的工具获取源码，然后在通过`git reset --hard HEAD^`跳到上一版本中
  - 方法2 - 先使用`git log --stat`查看每次提交修改了哪些文件，在利用`git diff HEAD commit-id`比较其变化
- git分支
  - 要找的文件可能不在当前分支中，需要手工查找其他分支
- 其他利用
  - 除了查看源码外，泄漏的git中也可能有其他有用的信息，比如.git/config文件夹等

#### 其他泄漏

除了Git外，还有很多开发工具的使用都可能造成敏感信息泄漏

- SVN泄漏
  - 可以利用.svn/entries或wc.db两个文件获取服务器源码等信息
- HG泄漏
  - 当初始化项目时，HG会在当前文件夹下创建一个.hg的隐藏文件夹，其中包含代码和分支修改记录等信息

### 敏感文件备份

某些IDE或编辑器会对编辑的文件进行一些备份，通过这种备份文件，我们往往可以获得某一文件的源码或网站的整体目录

- gedit备份文件 - 使用gedit编辑器保存文件，在该目录下会生成一个后缀为`~`的文件，其文件内容就是刚刚编辑的内容，通过浏览器即可访问
- vim备份文件 - 当用户在编辑文件但意外退出时，vim会在当前目录下生成一个备份文件，格式名为`.文件名.swp`
  - 先使用`touch 文件名`创建出对应文件，然后执行`vim -r 文件名`即可恢复文件
- 一些常规文件 - 存在一些经典的、有辨识度的文件，可以让我们更好的了解网站
  - robots.txt - 记录一些目录和CMS版本信息
  - readme.md - 记录CMS版本信息，有的甚至有Github地址
  - www.zip/rar/tar.gz - 往往是网站源码的备份

### Banner目录

Banner信息是指服务器对外显示的一些基础信息，这些信息可能对解题有着十分重要的作用

- 自行收集指纹库
- 使用Wappalyzer工具，该工具也提供了对应的Python库`python-Wappalyzer`
- 可以输入一些任意的URL来查看网站的错误页面信息

## CTF中的SQL注入

由于开发者在程序编写过程中，对传入用户数据的过滤不严格，将可能存在的攻击载荷拼接到SQL查询语句中，再将这些查询语句传递给后台数据库执行，从而引发实际的SQL注入攻击。

本质是对用户输入数据的合法性没有进行判断，导致传入数据库中的参数是用户可控的

详见[SQL注入](/Users/wei/markdown/Security/Web安全/SQL注入.md)一文

## 文件读取漏洞

指攻击者可以采用某些手段来读取服务器上开发者不允许读到的文件

## CSRF漏洞

## 命令执行漏洞

## XSS攻击

## 文件上传漏洞

## 反序列化漏洞

## 

